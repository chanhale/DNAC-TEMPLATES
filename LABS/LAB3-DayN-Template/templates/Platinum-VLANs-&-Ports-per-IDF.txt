##Stack information variables
#set( $StackPIDs = $ProductID.split(",") )
#set( $StackMemberCount = $StackPIDs.size() )
#set( $PortTotal = [] )
#set( $offset = $StackMemberCount - 1 )
#foreach( $Switch in [0..$offset] )
  #set( $Model = $StackPIDs[$Switch])
  #set( $PortCount = $Model.replaceAll("C9300L?-([2|4][4|8]).*","$1") )
  #set( $foo = $PortTotal.add($PortCount) )
#end
!
## VLANs per IDF
#set( $mgmt_vlan_number = 100 + ${IDF} )
#set( $prod_vlan_number = 200 + ${IDF} )
#set( $vendor_vlan_number = 300 + ${IDF} )
#set( $pci_vlan_number = 400 + ${IDF} )
#set( $security_vlan_number = 500 + ${IDF} )
#set( $voice_vlan_number = 600 + ${IDF} )
#set( $nacreg_vlan_number = 700 + ${IDF} )
#set( $phi_vlan_number = 800 + ${IDF} )
#set( $bh_vlan_number = 999 )
!
!
vlan ${mgmt_vlan_number}
 name mgmt
vlan ${prod_vlan_number}
 name prod
vlan ${vendor_vlan_number}
 name vendor
vlan ${pci_vlan_number}
 name pci
vlan ${security_vlan_number}
 name security
vlan ${voice_vlan_number}
 name voice
vlan ${nacreg_vlan_number}
 name nacreg
vlan ${phi_vlan_number}
 name phi
vlan ${bh_vlan_number}
 name disabled
!
device-tracking upgrade-cli force
!
device-tracking policy IPDT_MAX_10
 limit address-count 10
 no protocol udp
 tracking enable
!
##Macros
## Use Bind to Source variable to select access interfaces 
#macro( access_interface )
  description BASE-CONFIG
  switchport access vlan ${bh_vlan_number}
  switchport mode access
  switchport voice vlan ${voice_vlan_number}
  switchport port-security maximum 3
  switchport port-security
  snmp trap mac-notification change added
  snmp trap mac-notification change removed
  spanning-tree portfast
  spanning-tree bpduguard enable
#end
!
#macro( uplink_interface )
    switchport trunk allowed vlan add 1${IDF},2${IDF},3${IDF},4${IDF},5${IDF},6${IDF},7${IDF},8${IDF}
#end
!
##Access Port Configuration
#foreach( $Switch in [0..$offset] )
  #set( $SwiNum = $Switch + 1 )
  interface range gi ${SwiNum}/0/1 - $PortTotal[$Switch]
    #access_interface
#end
!
##Uplink Port Configuration
interface portchannel 1
 #uplink_interface
!



  
